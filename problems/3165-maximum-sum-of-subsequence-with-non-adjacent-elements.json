{
  "title": "Maximum Sum of Subsequence With Non-adjacent Elements",
  "problem_id": "3423",
  "frontend_id": "3165",
  "difficulty": "Hard",
  "problem_slug": "maximum-sum-of-subsequence-with-non-adjacent-elements",
  "topics": [
    "Array",
    "Divide and Conquer",
    "Dynamic Programming",
    "Segment Tree"
  ],
  "description": "You are given an array nums consisting of integers. You are also given a 2D array queries, where queries[i] = [posi, xi].\nFor query i, we first set nums[posi] equal to xi, then we calculate the answer to query i which is the maximum sum of a subsequence of nums where no two adjacent elements are selected.\nReturn the sum of the answers to all queries.\nSince the final answer may be very large, return it modulo 109 + 7.\nA subsequence is an array that can be derived from another array by deleting some or no elements without changing the order of the remaining elements.\nExample 1:\nExample 2:\nConstraints:",
  "examples": [
    {
      "example_num": 1,
      "example_text": "Input: nums = [3,5,9], queries = [[1,-2],[0,-3]]\nOutput: 21\nExplanation: After the 1 st query, nums = [3,-2,9] and the maximum sum of a subsequence with non-adjacent elements is 3 + 9 = 12 . After the 2 nd query, nums = [-3,-2,9] and the maximum sum of a subsequence with non-adjacent elements is 9.",
      "images": []
    },
    {
      "example_num": 2,
      "example_text": "Input: nums = [0,-1], queries = [[0,-5]]\nOutput: 0\nExplanation: After the 1 st query, nums = [-5,-1] and the maximum sum of a subsequence with non-adjacent elements is 0 (choosing an empty subsequence).",
      "images": []
    }
  ],
  "constraints": [
    "1 <= nums.length <= 5 * 104",
    "-105 <= nums[i] <= 105",
    "1 <= queries.length <= 5 * 104",
    "queries[i] == [posi, xi]",
    "0 <= posi <= nums.length - 1",
    "-105 <= xi <= 105"
  ],
  "follow_ups": [],
  "hints": [
    "Can you solve each query in <code>O(nums.length)</code> with dynamic programming?",
    "In order to optimize, we will use segment tree where each node contains the maximum value of (front element has been chosen or not, back element has been chosen or not)."
  ],
  "code_snippets": {
    "cpp": "class Solution {\npublic:\n    int maximumSumSubsequence(vector<int>& nums, vector<vector<int>>& queries) {\n        \n    }\n};",
    "java": "class Solution {\n    public int maximumSumSubsequence(int[] nums, int[][] queries) {\n        \n    }\n}",
    "python": "class Solution(object):\n    def maximumSumSubsequence(self, nums, queries):\n        \"\"\"\n        :type nums: List[int]\n        :type queries: List[List[int]]\n        :rtype: int\n        \"\"\"\n        ",
    "python3": "class Solution:\n    def maximumSumSubsequence(self, nums: List[int], queries: List[List[int]]) -> int:\n        ",
    "c": "int maximumSumSubsequence(int* nums, int numsSize, int** queries, int queriesSize, int* queriesColSize) {\n    \n}",
    "csharp": "public class Solution {\n    public int MaximumSumSubsequence(int[] nums, int[][] queries) {\n        \n    }\n}",
    "javascript": "/**\n * @param {number[]} nums\n * @param {number[][]} queries\n * @return {number}\n */\nvar maximumSumSubsequence = function(nums, queries) {\n    \n};",
    "typescript": "function maximumSumSubsequence(nums: number[], queries: number[][]): number {\n    \n};",
    "php": "class Solution {\n\n    /**\n     * @param Integer[] $nums\n     * @param Integer[][] $queries\n     * @return Integer\n     */\n    function maximumSumSubsequence($nums, $queries) {\n        \n    }\n}",
    "swift": "class Solution {\n    func maximumSumSubsequence(_ nums: [Int], _ queries: [[Int]]) -> Int {\n        \n    }\n}",
    "kotlin": "class Solution {\n    fun maximumSumSubsequence(nums: IntArray, queries: Array<IntArray>): Int {\n        \n    }\n}",
    "dart": "class Solution {\n  int maximumSumSubsequence(List<int> nums, List<List<int>> queries) {\n    \n  }\n}",
    "golang": "func maximumSumSubsequence(nums []int, queries [][]int) int {\n    \n}",
    "ruby": "# @param {Integer[]} nums\n# @param {Integer[][]} queries\n# @return {Integer}\ndef maximum_sum_subsequence(nums, queries)\n    \nend",
    "scala": "object Solution {\n    def maximumSumSubsequence(nums: Array[Int], queries: Array[Array[Int]]): Int = {\n        \n    }\n}",
    "rust": "impl Solution {\n    pub fn maximum_sum_subsequence(nums: Vec<i32>, queries: Vec<Vec<i32>>) -> i32 {\n        \n    }\n}",
    "racket": "(define/contract (maximum-sum-subsequence nums queries)\n  (-> (listof exact-integer?) (listof (listof exact-integer?)) exact-integer?)\n  )",
    "erlang": "-spec maximum_sum_subsequence(Nums :: [integer()], Queries :: [[integer()]]) -> integer().\nmaximum_sum_subsequence(Nums, Queries) ->\n  .",
    "elixir": "defmodule Solution do\n  @spec maximum_sum_subsequence(nums :: [integer], queries :: [[integer]]) :: integer\n  def maximum_sum_subsequence(nums, queries) do\n    \n  end\nend"
  }
}